{% extends 'base/base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/produit.css') }}">
{% endblock %}

{% block menu %}
    <ul>
        {% if app.user %}
            <li>Bienvenue {{ app.user.nom }}</li>
            <li><a href="{{ path('app_logout') }}">DÃ©connexion</a></li>
            <li><a href="{{ path('app_profil') }}">Mon profil</a></li>

            {# ðŸ”½ðŸ”½ AJOUT DU LIEN PANIER ðŸ”½ðŸ”½ #}
            {% if is_granted('ROLE_CLIENT') or is_granted('ROLE_ADMIN') %}
                {% set panier = app.session.get('panier', {}) %}
                {% set total_articles = panier|reduce((carry, v) => carry + v, 0) %}
                <li><a href="{{ path('client_panier') }}">ðŸ›’ Mon panier ({{ total_articles }})</a></li>
            {% endif %}

            {% if 'ROLE_ADMIN' in app.user.roles %}
                <li><a href="{{ path('admin_users') }}">GÃ©rer les utilisateurs</a></li>
                <li><a href="{{ path('admin_produits') }}">Ajouter un produit</a></li>
            {% endif %}

            {% if 'ROLE_SUPER_ADMIN' in app.user.roles %}
                <li><a href="{{ path('superadmin_dashboard') }}">GÃ©rer les admins</a></li>
                <li><a href="{{ path('admin_fixtures_load') }}">ðŸ”„ RÃ©initialiser les donnÃ©es</a></li>
            {% endif %}
        {% else %}
            <li><a href="{{ path('app_login') }}">Connexion</a></li>
            <li><a href="{{ path('register') }}">CrÃ©er un compte</a></li>
        {% endif %}
    </ul>
{% endblock %}
